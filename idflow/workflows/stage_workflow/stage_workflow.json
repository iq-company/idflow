{
  "name": "stage_workflow",
  "version": 15,
  "schemaVersion": 2,
  "inputParameters": [
    "docId",
    "stageName",
    "stageCounter",
    "workflows",
    "dynamicForkTasksParam"
  ],
  "tasks": [
    {
      "name": "prepare_stage_subworkflows",
      "taskReferenceName": "prepare_workflows",
      "type": "SIMPLE",
      "inputParameters": {
        "docId": "${workflow.input.docId}",
        "stageName": "${workflow.input.stageName}",
        "stageCounter": "${workflow.input.stageCounter}"
      },
      "taskDefinition": {
        "name": "prepare_stage_subworkflows",
        "version": 1,
        "ownerEmail": "idflow@example.com",
        "timeoutSeconds": 60,
        "responseTimeoutSeconds": 30
      }
    },
    {
      "name": "execute_workflows",
      "taskReferenceName": "execute",
      "type": "FORK_JOIN_DYNAMIC",
      "inputParameters": {
        "dynamicTasks": "${prepare_workflows.output.dynamicForkTasksParam}",
        "dynamicTasksInput": "${prepare_workflows.output.dynamicForkTasksInput}"
      },
      "dynamicForkTasksParam": "dynamicTasks",
      "dynamicForkTasksInputParamName": "dynamicTasksInput"
    },
    {
      "name": "join_workflows",
      "taskReferenceName": "join_workflows",
      "type": "JOIN"
    },
    {
      "name": "update_stage_status",
      "taskReferenceName": "update_status",
      "type": "SIMPLE",
      "inputParameters": {
        "docId": "${workflow.input.docId}",
        "stageName": "${workflow.input.stageName}",
        "stageCounter": "${workflow.input.stageCounter}",
        "status": "done"
      },
      "taskDefinition": {
        "name": "update_stage_status",
        "version": 1,
        "ownerEmail": "idflow@example.com",
        "timeoutSeconds": 60,
        "responseTimeoutSeconds": 30
      }
    }
  ],
  "outputParameters": {
    "docId": "${workflow.input.docId}",
    "stageName": "${workflow.input.stageName}",
    "stageCounter": "${workflow.input.stageCounter}",
    "completed": true
  },
  "ownerEmail": "idflow@example.com"
}
